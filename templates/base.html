{% load static %}

<!DOCTYPE html>
<html lang="ko">
<head>
    <title>Document</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <link rel="stylesheet" href="{% static 'css/base.css' %}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/clockpicker/dist/bootstrap-clockpicker.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/clockpicker/dist/bootstrap-clockpicker.min.js"></script>
    <script src="{% static 'js/base.js' %}"></script>
    {% block title %}
    {% endblock %}
</head>
<body>
    <main>
        <div class="base--container">
            <nav>
                <div class="nav-container">
                    <!-- 페이지별 네브바 변경 -->
                    {% if pagetype == "1"%}
                        <h1 class="nav-title">Taxi ROKA</h1>
                    {% else %}
                        <img src="/static/img/beforepage.png" alt="뒤로가기" class="beforepage-img" onclick="goBack()">
                    {% endif %}
            
                    <!-- 검색 -->
                    <!-- 로그인 -->
                    {% if user.is_authenticated %}
                    <div class="login-nav-right">
                        {% if alarm_num != "0" %}
                            <!-- 모달트리거 -->
                            <button type="button" class="" data-bs-toggle="modal" data-bs-target="#alarmModal">
                                <img src="/static/img/notice-activate.png" alt="notice알림이미지" class="notice-img">
                            </button>
                        {% else %}
                            <img src="/static/img/notice.png" alt="notice이미지" class="notice-img">
                        {% endif %}
                        <img src="/static/img/hamburger.png" alt="hamburger이미지" class="hamburger-img">
                    </div>
                    {% else %}
                    <!-- 비로그인 -->
                    <div class="search-container">
                        <form class="search-room" role="search" method="POST">{% csrf_token %}
                            <input class="form-control me-2" type="search" placeholder="부대를 검색하세요.">
                            <button class="btn btn-outline-secondary" type="submit">검색</button>
                        </form>
                    </div>
                    {% endif %}
                </div>
            </nav>
            
            <div class="main-container">
                {% block content %}
                {% endblock %}
            </div>
            <footer class="footer-custom">
                
                <a href="/matching/">
                    <img src="/static/img/home.png" alt="home이미지">
                </a>
            
            
                <a href="/matching/history/">
                    <img src="/static/img/chating.png" alt="chatingroom이미지">
                </a>
            
        
                <a href="/vacation/">
                    <img src="/static/img/calendar.png" alt="calendar이미지">
                </a>
        
    
                <a href="/user/mypage/">
                    <img src="/static/img/mypage2.png" alt="mypage이미지">
                </a>
        
            </footer>
        </div>
    </main>
    </div>  
    <!-- 알람모달 -->
    <div class="modal fade" id="alarmModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="staticBackdropLabel">내 알림 확인하기!</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body alarm-modal-body">
                    {% for alarm in alarms reversed %}
                        <div class="alarm-content">
                            <p>{{ alarm.content }}</p>
                            <a href="/matching/alarm-delete/{{ alarm.id }}"><button type="button" class="btn btn-success">확인</button></a>
                        </div>
                    {% endfor %}

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">닫기</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm" crossorigin="anonymous"></script>
</body>
</html>



{% extends 'base.html' %}
{% load static %}

{% block title %}
{% endblock %}

{% block content %}
<div class="create-room">
    <form action="{% url 'matching:create' %}" method="post">{% csrf_token %}
        <div class="direction-container">
            <div class="form-floating locations">
                <input class="form-control" placeholder="" id="floatingTextarea" name="departure_area"></input>
                <label for="floatingTextarea">출발지점을 입력하세요.</label>
            </div>
            <img class="img-direction" src="{% static 'img/moveto.png' %}" alt="Image 2">
            <div class="form-floating locations">
                <input class="form-control" placeholder="Leave a comment here" id="floatingTextarea" name="destination_area"></ㅑ>
                <label for="floatingTextarea">도착지점을 입력하세요.</label>
            </div>
        </div>
        <div class="direction-container">
            <div class="matching-date">
                <p>예약 날짜</p>
                <input type="date" name="departure_date" id="create-departure_date" min="" max="">
            </div>
            <div>
                <p>출발 시간</p>
                <div class="input-group clockpicker" data-placement="top" data-align="top" data-autoclose="true">
                    <input type="text" class="form-control" value="08:00" name="departure_time">
                    <span class="input-group-addon">
                        <span class="glyphicon glyphicon-time"></span>
                    </span>
                </div>
                <script>
                    $('.clockpicker').clockpicker();
                </script>
            </div>
        </div>
    
        <div class="create-container">
            <p>좌석 선택</p>
            <div class="create-option">
                <div class="seat-container">
                    <label for="rating0" class="seat-option">
                        <img src="{% static 'img/selected_seat.png' %}" alt="Image 0" class="disabled">
                    </label>
                    <input type="radio" name="seat_num" id="rating1" value="1" class="hidden-radio">
                    <label for="rating1" class="seat-option">
                        <img src="{% static 'img/seat.png' %}" alt="Image 1">
                    </label>
                </div>
                <div class="seat-container">
                    <input type="radio" name="seat_num" id="rating2" value="2" class="hidden-radio">
                    <label for="rating2" class="seat-option">
                        <img src="{% static 'img/seat.png' %}" alt="Image 2">
                    </label>
                    <input type="radio" name="seat_num" id="rating3" value="3" class="hidden-radio">
                    <label for="rating3" class="seat-option">
                        <img src="{% static 'img/seat.png' %}" alt="Image 3">
                    </label>
                    <input type="radio" name="seat_num" id="rating4" value="4" class="hidden-radio">
                    <label for="rating4" class="seat-option">
                        <img src="{% static 'img/seat.png' %}" alt="Image 4">
                    </label>
                </div>
            </div>
            <div class="create-option-row">
                <div>
                    <input type="radio" name="max_num" value="3" id="rating3">
                    <label for="rating3">최대 3인 매칭</label>
                </div>
                <div>
                    <input type="radio" name="max_num" value="4" id="rating4">
                    <label for="rating4">최대 4인 매칭</label>
                </div>
                
            </div>
        </div>
        <button type="submit" class="create-room-button">방 생성하기</button>
    </form>
</div>
<script>
    var staticSeatImage = "{% static 'img/seat.png' %}";
    var staticSelectedSeatImage = "{% static 'img/selected_seat.png' %}";
</script>
<script>
    $(document).ready(function(){
        $(document).ready(function(){
        // 기본적으로 선택된 라디오 버튼 값을 가져옴

        $(".seat-option img").click(function() {
            // 클릭한 이미지의 부모 라벨 요소
            var label = $(this).parent("label");
            // 클릭한 이미지의 연결된 input 요소
            var input = label.next("input[type='radio']");

            // 이미지 클래스가 disabled가 아닌 경우에만 처리
            if (!label.find("img").hasClass("disabled")) {
                // 이미지 클릭 시 연결된 input 체크
                input.prop("checked", true);

                // 모든 이미지 초기화 (선택되지 않은 상태로 변경)
                $(".seat-option img:not(.disabled)").attr("src", "{% static 'img/seat.png' %}");
                $(".seat-option img:not(.disabled)").removeClass("checked");
                // 클릭한 이미지만 선택된 이미지로 변경
                label.find("img").attr("src", "{% static 'img/selected_seat.png' %}");
                label.find("img").addClass("checked");
            }

        });
    });
        

        // 기본적으로 최대 4인 매칭을 선택한 상태로 설정
        $("input[name='max_num'][value='4']").prop("checked", true);
    });
</script>
<script>
    const currentDate = new Date();
    const year = currentDate.getFullYear();
    const month = String(currentDate.getMonth() + 1).padStart(2, '0');
    const monthh = String(currentDate.getMonth() + 2).padStart(2, '0');
    const day = String(currentDate.getDate()).padStart(2, '0');
    const minDate = `${year}-${month}-${day}`;
    const maxDate = `${year}-${monthh}-${day}`;

    const selectedDateInput = document.getElementById('create-departure_date');
    selectedDateInput.min = minDate;
    selectedDateInput.max = maxDate;
</script>
{% endblock %}






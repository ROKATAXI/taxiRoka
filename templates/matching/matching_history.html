{% extends 'base.html' %}

{% block content %}
<div class="application_details">
    <div class="col row history_expected">
        <span>예정</span>
        <span>{{number_matching}}</span>
    </div>
    <div class="col row history_expected">
        <span>전체</span>
        <span>{{number_all}}</span>
    </div>
    <div class="col row history_expected">
        <span>전체</span>
        <span>{{number_matched}}</span>
    </div>
</div>
<hr>

<div class="expected_rooms">
    {% for matching in matching_rooms %}
    <div class="matching-room" data-bs-toggle="modal" data-bs-target="exitOrChatingModal">
        <div class="matching-room--left">
            <div>
                {{ matching.matching_room_id.departure_date }}
            </div>
            <div>{{ matching.matching_room_id.departure_time }}</div>
            <div>
                {{ matching.matching_room_id.current_num }} / {{ matching.matching_room_id.max_num }}
            </div>
            <div>
                
            </div>

        </div>
        <div class="matching-room--right">
            <div class="matching--departure">
                <span>출발: {{matching.matching_room_id.departure_area}}</span>
                <span>도착: {{matching.matching_room_id.destination_area}}</span>
                {% if matching.host_yn %}
                    <div class="host-icon-box">
                        <div class="host-icon"></div>
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
        <li>
            <a href="/chat/{{ matching.matching_room_id.uuid }}/">
                <p>{{ matching.matching_room_id.departure_date }}</p>
                <p>{{ matching.matching_room_id.departure_time }}</p>
                <p>출발: {{matching.matching_room_id.departure_area}}</p>
                <p>도착: {{matching.matching_room_id.destination_area}}</p>

                <form action="{% url 'matching:delete' matching.id %}" method="post">
                    {% csrf_token %}
                    <button type="submit">방 나가기</button>
                </form>
            </a>
        </li>
    {% endfor %}
</div>

<div id="closed-room-list">
    <h2>종료된 매칭방</h2>
    <ul class="room">
        {% for matching in matched_rooms %}
            <li>
                <a href="/chat/{{ matching.matching_room_id.uuid }}/">
                    <p>{{ matching.matching_room_id.departure_date }}</p>
                    <p>{{ matching.matching_room_id.departure_time }}</p>
                    <p>출발: {{matching.matching_room_id.departure_area}}</p>
                    <p>도착: {{matching.matching_room_id.destination_area}}</p>
                </a>
            </li>
        {% endfor %}
    </ul>
</div>

<div class="modal fade" id="exitOrChatingModal" tabindex="-1" aria-labelledby="exitOrChatingModal" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="exampleModalLabel">Modal title</h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          ...
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary">Save changes</button>
        </div>
      </div>
    </div>
  </div>
{% endblock %}
{% extends 'base.html' %}

{% block content %}
<div id="my-matching-history">
    <h1>나의 매칭 이력</h1>
    <ul>
        <li>참여한 매칭방: <span>{{number_all}}</span> 개</li>
        <li>열려있는 매칭방: <span>{{number_matching}}</span> 개</li>
        <li>종료된 매칭방: <span>{{number_matched}}</span> 개</li>
    </ul>
</div>

<div id="opened-room-list">
    <h2>열려있는 매칭방</h2>
    <ul class="room">
        {% for matching in matching_rooms %}
            <li>
                <a href="/chat/{{ chtting_room_name }}/">
                    <p>{{ matching.matching_room_id.departure_date }}</p>
                    <p>{{ matching.matching_room_id.departure_time }}</p>
                    <p>출발: {{matching.matching_room_id.departure_area}}</p>
                    <p>도착: {{matching.matching_room_id.destination_area}}</p>

                    <form action="{% url 'matching:delete' matching.id %}" method="post">
                        {% csrf_token %}
                        <button type="submit">방 나가기</button>
                    </form>
                </a>
            </li>
        {% endfor %}
    </ul>
</div>

<div id="closed-room-list">
    <h2>종료된 매칭방</h2>
    <ul class="room">
        {% for matching in matched_rooms %}
            <li>
                <a href="/chat/{{ chtting_room_name }}/">
                    <p>{{ matching.matching_room_id.departure_date }}</p>
                    <p>{{ matching.matching_room_id.departure_time }}</p>
                    <p>출발: {{matching.matching_room_id.departure_area}}</p>
                    <p>도착: {{matching.matching_room_id.destination_area}}</p>
                </a>
            </li>
        {% endfor %}
    </ul>
</div>

<style>
    #my-matching-history, #opened-room-list {
        margin-bottom: 40px;
    }
    #my-matching-history span {
        font-weight: bold;
    }
    ul {
        padding: 0;
        margin: 0;
    }
    .room > li {
        padding: 15px;
        margin-bottom: 20px;
        background-color: rgb(228, 228, 228);
        border-radius: 10px;
    }
    .room > li:hover {
        cursor: pointer;
    }
    .room > li > a {
        text-decoration: none;
        color: black;
    }
    .room > li > a:visited {
        color: black;
    }
</style>
{% endblock %}